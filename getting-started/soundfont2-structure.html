<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SoundFont2 Structure - Soundfont3</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="A SoundFont3 parser for Node.js and web browsers">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../getting-started/index.html"><strong aria-hidden="true">2.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/installation.html"><strong aria-hidden="true">2.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../getting-started/basic-usage.html"><strong aria-hidden="true">2.2.</strong> Basic Usage</a></li><li class="chapter-item expanded "><a href="../getting-started/soundfont2-structure.html" class="active"><strong aria-hidden="true">2.3.</strong> SoundFont2 Structure</a></li></ol></li><li class="chapter-item expanded "><a href="../api/index.html"><strong aria-hidden="true">3.</strong> API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/soundfont2/index.html"><strong aria-hidden="true">3.1.</strong> SoundFont2</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/soundfont2/meta-data.html"><strong aria-hidden="true">3.1.1.</strong> MetaData</a></li><li class="chapter-item expanded "><a href="../api/soundfont2/sample/index.html"><strong aria-hidden="true">3.1.2.</strong> Sample</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/soundfont2/sample/sample-header.html"><strong aria-hidden="true">3.1.2.1.</strong> SampleHeader</a></li><li class="chapter-item expanded "><a href="../api/soundfont2/sample/sample-type.html"><strong aria-hidden="true">3.1.2.2.</strong> SampleType</a></li></ol></li><li class="chapter-item expanded "><a href="../api/soundfont2/preset-data.html"><strong aria-hidden="true">3.1.3.</strong> PresetData</a></li><li class="chapter-item expanded "><a href="../api/soundfont2/preset.html"><strong aria-hidden="true">3.1.4.</strong> Preset</a></li><li class="chapter-item expanded "><a href="../api/soundfont2/instrument.html"><strong aria-hidden="true">3.1.5.</strong> Instrument</a></li><li class="chapter-item expanded "><a href="../api/soundfont2/bank.html"><strong aria-hidden="true">3.1.6.</strong> Bank</a></li><li class="chapter-item expanded "><a href="../api/soundfont2/key.html"><strong aria-hidden="true">3.1.7.</strong> Key</a></li></ol></li><li class="chapter-item expanded "><a href="../api/generator/index.html"><strong aria-hidden="true">3.2.</strong> Generator</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api/generator/generator-type.html"><strong aria-hidden="true">3.2.1.</strong> GeneratorType</a></li></ol></li><li class="chapter-item expanded "><a href="../api/modulator.html"><strong aria-hidden="true">3.3.</strong> Modulator</a></li></ol></li><li class="chapter-item expanded "><a href="../development.html"><strong aria-hidden="true">4.</strong> Development</a></li><li class="chapter-item expanded "><a href="../todo.html"><strong aria-hidden="true">5.</strong> Todo</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Soundfont3</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="soundfont2-structure"><a class="header" href="#soundfont2-structure">SoundFont2 Structure</a></h1>
<p>This section explains a bit about the general SoundFont2 structure. It's not necessarily required to know this information in order to use the library, but it may make it easier to understand how the library and SoundFonts work.</p>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h2>
<ul>
<li><a href="#general-structure">General Structure</a></li>
<li><a href="#riff-chunks">RIFF Chunks</a>
<ul>
<li><a href="#info-chunk"><code>INFO</code> Chunk</a></li>
<li><a href="#smpl-chunk"><code>smpl</code> Chunk</a></li>
<li><a href="#pdta-chunk"><code>pdta</code> Chunk</a>
<ul>
<li><a href="#preset-data">Preset Data</a></li>
<li><a href="#instrument-data">Instrument Data</a></li>
<li><a href="#sample-data">Sample Data</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#presets">Presets</a></li>
<li><a href="#instruments">Instruments</a></li>
</ul>
<h2 id="general-structure"><a class="header" href="#general-structure">General Structure</a></h2>
<p>A SoundFont has one or more presets, which can normally be selected with the <code>MIDI Program Change</code> command. The presets have one or more preset zones, that have one instrument. The instruments have instrument zones and these have one sample each.</p>
<p>Multiple preset zones can refer to the same instrument and multiple instrument zones can refer to the same samples.</p>
<p><img src="https://i.imgur.com/c2Gud3u.png" alt="General Structure" /></p>
<h2 id="riff-chunks"><a class="header" href="#riff-chunks">RIFF Chunks</a></h2>
<p>A SoundFont2 file is a RIFF (Resource Interchange File Format) file, which contains multiple chunks. Those chunks are identified by a <a href="https://en.wikipedia.org/wiki/FourCC">FourCC (four-character code)</a>. If an identifier is not for characters long, it will be padded by spaces. For example, "foo" would be read as "foo ".</p>
<p>Every SoundFont2 file should have at least three top-level sub-chunks: an <code>INFO</code> chunk containing metadata, a <code>sdta</code> chunk containing Wave Audio (WAV) samples and a <code>pdta</code> header containing the preset, instrument and sample headers.</p>
<p>All the raw (unparsed) data is available in the <code>SoundFont2</code> class, as <code>metaData</code>, <code>sampleData</code> and <code>presetData</code>.</p>
<p><img src="https://i.imgur.com/BL8FvcC.png" alt="SoundFont2 RIFF chunks" /></p>
<h3 id="info-chunk"><a class="header" href="#info-chunk"><code>INFO</code> Chunk</a></h3>
<p>The <code>INFO</code> chunk contains at least the following sub-chunks.</p>
<ul>
<li>
<p><code>ifil</code> - The SoundFont specification version.</p>
<p>Available as <code>metaData.version</code>.</p>
</li>
<li>
<p><code>isng</code> - The sound engine for which the SoundFont was optimized.</p>
<p>Available as <code>metaData.soundEngine</code>.</p>
</li>
<li>
<p><code>INAM</code> - The name of the SoundFont.</p>
<p>Available as <code>metaData.name</code>.</p>
</li>
</ul>
<p>The other sub-chunks are <strong>optional</strong>.</p>
<ul>
<li>
<p><code>irom</code> - A sound data ROM to which any ROM samples refer.</p>
<p>Available as <code>metaData.rom</code>.</p>
</li>
<li>
<p><code>iver</code> - A sound data ROM revision to which any ROM samples refer.</p>
<p>Available as <code>metaData.romVersion</code>.</p>
</li>
<li>
<p><code>ICRD</code> - The creation date of the SoundFont, conventionally in the 'Month Day, Year' format.</p>
<p>Available as <code>metaData.creationDate</code>.</p>
</li>
<li>
<p><code>IENG</code> - The author or authors of the SoundFont.</p>
<p>Available as <code>metaData.author</code>.</p>
</li>
<li>
<p><code>IPDR</code> - The product for which the SoundFont is intended.</p>
<p>Available as <code>metaData.product</code>.</p>
</li>
<li>
<p><code>ICOP</code> - Copyright assertion string associated with the SoundFont.</p>
<p>Available as <code>metaData.copyright</code>.</p>
</li>
<li>
<p><code>ICMT</code> - Any comments associated with the SoundFont.</p>
<p>Available as <code>metaData.comments</code>.</p>
</li>
<li>
<p><code>ISFT</code> - The tool used to create the SoundFont.</p>
<p>Available as <code>metaData.createdBy</code>.</p>
</li>
</ul>
<h3 id="sdta-chunk"><a class="header" href="#sdta-chunk"><code>sdta</code> Chunk</a></h3>
<p>The sample chunk has one or two sub-chunks.</p>
<ul>
<li>
<p><code>smpl</code> - The 16-bit WAV sample data.</p>
<p>Available as <code>sampleData</code>.</p>
</li>
<li>
<p><code>sm24</code> - The 8-bit WAV sample data, in addition to the 16-bit data.</p>
<p>Currently not available in the API.</p>
</li>
</ul>
<p>The <code>sdta</code> and <code>sm24</code> sub-chunks can be combined to get 24-bit WAV sample data, but the library currently does not support this yet.</p>
<h3 id="pdta-chunk"><a class="header" href="#pdta-chunk"><code>pdta</code> Chunk</a></h3>
<p>The <code>pdta</code> sub-chunk contains data for presets, instruments and samples in the SoundFont. There are four preset and four instrument chunks, which form the instruments and presets. There is just one sample header chunk, that forms the samples together with the data from the <code>sdta</code> chunk.</p>
<h4 id="preset-data"><a class="header" href="#preset-data">Preset Data</a></h4>
<p>The <code>pdta</code> has four sub-chunks that form the preset data.</p>
<ul>
<li>
<p><code>phdr</code> - The preset headers.</p>
<p>Available as <code>presetData.presetHeaders</code>.</p>
</li>
<li>
<p><code>pbag</code> - The preset zone indices.</p>
<p>Available as <code>presetData.presetZones</code>.</p>
</li>
<li>
<p><code>pmod</code> - The preset modulators.</p>
<p>Available as <code>presetData.presetModulators</code></p>
</li>
<li>
<p><code>pgen</code> - The preset generators.</p>
<p>Available as <code>presetData.presetGenerators</code></p>
</li>
</ul>
<h4 id="instrument-data"><a class="header" href="#instrument-data">Instrument Data</a></h4>
<p>The <code>pdta</code> has four sub-chunks that form the instrument data.</p>
<ul>
<li>
<p><code>inst</code> - The instrument headers.</p>
<p>Available as <code>presetData.instrumentHeaders</code>.</p>
</li>
<li>
<p><code>ibag</code> - The instrument zone indices.</p>
<p>Available as <code>presetData.instrumentZones</code>.</p>
</li>
<li>
<p><code>imod</code> - The instrument modulators.</p>
<p>Available as <code>presetData.instrumentModulators</code></p>
</li>
<li>
<p><code>igen</code> - The instrument generators.</p>
<p>Available as <code>presetData.instrumentGenerators</code></p>
</li>
</ul>
<h4 id="sample-data"><a class="header" href="#sample-data">Sample Data</a></h4>
<p>The <code>pdta</code> has one sub-chunk with the sample header data.</p>
<ul>
<li>
<p><code>shdr</code> - The sample headers.</p>
<p>Available as <code>presetData.sampleHeaders</code></p>
</li>
</ul>
<h2 id="presets"><a class="header" href="#presets">Presets</a></h2>
<p>TODO</p>
<h2 id="instruments"><a class="header" href="#instruments">Instruments</a></h2>
<p>TODO</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../getting-started/basic-usage.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../api/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../getting-started/basic-usage.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../api/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
