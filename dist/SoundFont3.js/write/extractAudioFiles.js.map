{"version":3,"file":"extractAudioFiles.js","sources":["../../../src/write/extractAudioFiles.ts"],"sourcesContent":["import { SoundFont3 } from '../soundFont3'\nimport { pcm16BufferToWav } from './convert'\n\n/**\n * Extract samples from SoundFont to folder\n * @param {SoundFont3} soundFont - folder to dump samples.\n * @param {string} folderPath - folder to dump samples.\n */\nexport const extractAudioFiles = async (soundFont: SoundFont3, folderPath: string) => {\n  const { existsSync, mkdirSync, writeFileSync } = await import('fs')\n\n  const soundFontVersion = Number(soundFont.metaData.version)\n  if (!existsSync(folderPath)) mkdirSync(folderPath)\n  if (soundFontVersion >= 2 && soundFontVersion < 3) {\n    for (const header of soundFont.presetData.sampleHeaders) {\n      if (header.name === 'EOS') break\n      const data = soundFont.sampleData.slice(2 * header.start, 2 * header.end)\n      const wavFile = pcm16BufferToWav(header.sampleRate, data)\n      writeFileSync(`${folderPath}/${header.name}.wav`, wavFile)\n    }\n  } else if (soundFontVersion >= 3 && soundFontVersion < 4) {\n    soundFont.samples.forEach((sample) => {\n      writeFileSync(`${folderPath}/${sample.header.name}.ogg`, Buffer.from(sample.data))\n    })\n  }\n  return\n}\n"],"names":["async","soundFont","folderPath","existsSync","mkdirSync","writeFileSync","import","soundFontVersion","Number","metaData","version","header","presetData","sampleHeaders","name","data","sampleData","slice","start","end","wavFile","pcm16BufferToWav","sampleRate","samples","forEach","sample","Buffer","from"],"mappings":"8EAQiCA,MAAOC,EAAuBC,KAC7D,MAAMC,WAAEA,EAAYC,UAAAA,EAAAC,cAAWA,SAAwBC,OAAO,MAExDC,EAAmBC,OAAOP,EAAUQ,SAASC,SAE/C,GADCP,EAAWD,MAAuBA,GACnCK,GAAoB,GAAKA,EAAmB,EACnC,IAAA,MAAAI,KAAUV,EAAUW,WAAWC,cAAe,CACnD,GAAgB,QAAhBF,EAAOG,KAAgB,MACrB,MAAAC,EAAOd,EAAUe,WAAWC,MAAM,EAAIN,EAAOO,MAAO,EAAIP,EAAOQ,KAC/DC,EAAUC,EAAAA,iBAAiBV,EAAOW,WAAYP,GACpDV,EAAc,GAAGH,KAAcS,EAAOG,WAAYM,EACpD,MACSb,GAAoB,GAAKA,EAAmB,GAC3CN,EAAAsB,QAAQC,SAASC,IACXpB,EAAA,GAAGH,KAAcuB,EAAOd,OAAOG,WAAYY,OAAOC,KAAKF,EAAOV,MAAK,GAGrF"}