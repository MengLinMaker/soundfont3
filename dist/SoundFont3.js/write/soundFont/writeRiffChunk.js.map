{"version":3,"file":"writeRiffChunk.js","sources":["../../../../src/write/soundFont/writeRiffChunk.ts"],"sourcesContent":["import { SF_SUB_CHUNKS_ID, SF_TOP_CHUNKS_FORMAT, SF_TOP_CHUNKS_ID } from '../../constants'\nimport { concatBuffer, dataViewWriteString } from '../utils'\n\n/**\n * Writes a RIFF sub chunk buffer.\n * @param {SF_SUB_CHUNKS_ID} chunkId - 4 character code chunk id.\n * @param {ArrayBuffer} contentBuffer - Subchunk buffer.\n * @param {number} paddingMax - Maximum pad for even RIFF byte.\n * @return {Int8Array} Chunk buffer\n */\nexport const writeRiffSubChunk = (\n  chunkId: SF_SUB_CHUNKS_ID,\n  contentBuffer: ArrayBuffer,\n  paddingMax: number = 0\n) => {\n  if (paddingMax % 2 !== 0) throw Error('Max padding must be even number')\n\n  if (paddingMax > 0) {\n    const padBuffer = new ArrayBuffer(paddingMax - (contentBuffer.byteLength % 2))\n    contentBuffer = concatBuffer(contentBuffer, padBuffer)\n  }\n\n  const instView = new DataView(new ArrayBuffer(8))\n  dataViewWriteString(instView, 0, chunkId)\n  instView.setUint32(4, contentBuffer.byteLength, true)\n  return concatBuffer(instView.buffer, contentBuffer)\n}\n\n/**\n * Writes a RIFF top chunk buffer.\n * @param {SF_TOP_CHUNKS_ID} chunkId - 4 character code chunk id.\n * @param {SF_TOP_CHUNKS_FORMAT} format - 4 character code format.\n * @param {ArrayBuffer} Chunk - Content buffer.\n * @return {Int8Array}\n */\nexport const writeRiffTopChunk = (\n  chunkId: SF_TOP_CHUNKS_ID,\n  format: SF_TOP_CHUNKS_FORMAT,\n  contentBuffer: ArrayBuffer\n) => {\n  const instView = new DataView(new ArrayBuffer(12))\n  dataViewWriteString(instView, 0, chunkId)\n  instView.setUint32(4, 4 + contentBuffer.byteLength, true)\n  dataViewWriteString(instView, 8, format)\n  return concatBuffer(instView.buffer, contentBuffer)\n}\n"],"names":["chunkId","contentBuffer","paddingMax","Error","padBuffer","ArrayBuffer","byteLength","concatBuffer","instView","DataView","dataViewWriteString","setUint32","buffer","format"],"mappings":"oEAUiC,CAC/BA,EACAC,EACAC,EAAqB,KAErB,GAAIA,EAAa,GAAM,EAAG,MAAMC,MAAM,mCAEtC,GAAID,EAAa,EAAG,CAClB,MAAME,EAAY,IAAIC,YAAYH,EAAcD,EAAcK,WAAa,GAC3DL,EAAAM,EAAAA,aAAaN,EAAeG,EAC9C,CAEA,MAAMI,EAAW,IAAIC,SAAS,IAAIJ,YAAY,IAGvC,OAFaK,EAAAA,oBAAAF,EAAU,EAAGR,GACjCQ,EAASG,UAAU,EAAGV,EAAcK,YAAY,GACzCC,eAAaC,EAASI,OAAQX,EAAa,4BAUnB,CAC/BD,EACAa,EACAZ,KAEA,MAAMO,EAAW,IAAIC,SAAS,IAAIJ,YAAY,KAIvC,OAHaK,EAAAA,oBAAAF,EAAU,EAAGR,GACjCQ,EAASG,UAAU,EAAG,EAAIV,EAAcK,YAAY,GAChCI,EAAAA,oBAAAF,EAAU,EAAGK,GAC1BN,eAAaC,EAASI,OAAQX,EAAa"}