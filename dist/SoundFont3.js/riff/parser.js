"use strict";var r=require("./parseError.js"),e=require("./utils.js"),t=require("./riffChunk.js");const s=(r,e)=>{const s=a(r,e),o=n(r,e+4);let h=[];return"RIFF"!==s&&"LIST"!==s||(h=u(r.subarray(e+12))),new t.RIFFChunk(s,o,r.subarray(e+8),h)},n=(r,e)=>((r=r.subarray(e,e+4))[0]|r[1]<<8|r[2]<<16|r[3]<<24)>>>0,u=r=>{const e=[];let t=0;for(;t<=r.length-8;){const n=s(r,t);e.push(n),t+=8+n.length,t=t%2?t+1:t}return e},a=(r,t=0)=>e.getStringFromBuffer(r.subarray(t,t+4));exports.getChunk=s,exports.getChunkId=a,exports.getChunkLength=n,exports.getSubChunks=u,exports.parseBuffer=e=>{const s=a(e);if("RIFF"!==s)throw new r.ParseError("Invalid file format","RIFF",s);const n=a(e,8);if("sfbk"!==n)throw new r.ParseError("Invalid signature","sfbk",n);const o=e.subarray(8),h=u(o.subarray(4));return new t.RIFFChunk(s,o.length,o,h)};
//# sourceMappingURL=parser.js.map
